{"remainingRequest":"D:\\project\\study\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\study\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\project\\study\\src\\store\\index.js","dependencies":[{"path":"D:\\project\\study\\src\\store\\index.js","mtime":1624501954479},{"path":"D:\\project\\study\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624501948781},{"path":"D:\\project\\study\\node_modules\\babel-loader\\lib\\index.js","mtime":1624501948623},{"path":"D:\\project\\study\\node_modules\\eslint-loader\\index.js","mtime":1624501950195}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9wcm9qZWN0L3N0dWR5L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCBWdWV4IGZyb20gJ3Z1ZXgnOwoKdmFyIHNldExvY2FsQ2FydExpc3QgPSBmdW5jdGlvbiBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKSB7CiAgdmFyIGNhcnRMaXN0ID0gc3RhdGUuY2FydExpc3Q7CiAgdmFyIGNhcnRMaXN0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoY2FydExpc3QpOwogIGxvY2FsU3RvcmFnZS5jYXJ0TGlzdCA9IGNhcnRMaXN0U3RyaW5nOwp9OwoKdmFyIGdldExvY2FDYXJ0TGlzdCA9IGZ1bmN0aW9uIGdldExvY2FDYXJ0TGlzdCgpIHsKICAvLyB7IHNob3BJZDoge3Nob3BOYW1lOicnLCBwcm9kdWN0TGlzdDp7IHByb2R1Y3RJZDoge30gfX19CiAgdHJ5IHsKICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jYXJ0TGlzdCk7CiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIHt9OwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IFZ1ZXguY3JlYXRlU3RvcmUoewogIHN0YXRlOiB7CiAgICBjYXJ0TGlzdDogZ2V0TG9jYUNhcnRMaXN0KCksCiAgICBhZGRyZXNzTGlzdDogW10KICB9LAogIG11dGF0aW9uczogewogICAgY2hhbmdlQ2FydEl0ZW1JbmZvOiBmdW5jdGlvbiBjaGFuZ2VDYXJ0SXRlbUluZm8oc3RhdGUsIHBheWxvYWQpIHsKICAgICAgdmFyIHNob3BJZCA9IHBheWxvYWQuc2hvcElkLAogICAgICAgICAgcHJvZHVjdElkID0gcGF5bG9hZC5wcm9kdWN0SWQsCiAgICAgICAgICBwcm9kdWN0SW5mbyA9IHBheWxvYWQucHJvZHVjdEluZm87CiAgICAgIHZhciBzaG9wSW5mbyA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0gfHwgewogICAgICAgIHNob3BOYW1lOiAnJywKICAgICAgICBwcm9kdWN0TGlzdDoge30KICAgICAgfTsKICAgICAgdmFyIHByb2R1Y3QgPSBzaG9wSW5mby5wcm9kdWN0TGlzdFtwcm9kdWN0SWRdOwoKICAgICAgaWYgKCFwcm9kdWN0KSB7CiAgICAgICAgcHJvZHVjdEluZm8uY291bnQgPSAwOwogICAgICAgIHByb2R1Y3QgPSBwcm9kdWN0SW5mbzsKICAgICAgfQoKICAgICAgcHJvZHVjdC5jb3VudCA9IHByb2R1Y3QuY291bnQgKyBwYXlsb2FkLm51bTsKCiAgICAgIGlmIChwYXlsb2FkLm51bSA+IDApIHsKICAgICAgICBwcm9kdWN0LmNoZWNrID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHByb2R1Y3QuY291bnQgPCAwKSB7CiAgICAgICAgcHJvZHVjdC5jb3VudCA9IDA7CiAgICAgIH0KCiAgICAgIHNob3BJbmZvLnByb2R1Y3RMaXN0W3Byb2R1Y3RJZF0gPSBwcm9kdWN0OwogICAgICBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdID0gc2hvcEluZm87CiAgICAgIHNldExvY2FsQ2FydExpc3Qoc3RhdGUpOwogICAgfSwKICAgIGNoYW5nZVNob3BOYW1lOiBmdW5jdGlvbiBjaGFuZ2VTaG9wTmFtZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICB2YXIgc2hvcElkID0gcGF5bG9hZC5zaG9wSWQsCiAgICAgICAgICBzaG9wTmFtZSA9IHBheWxvYWQuc2hvcE5hbWU7CiAgICAgIHZhciBzaG9wSW5mbyA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0gfHwgewogICAgICAgIHNob3BOYW1lOiAnJywKICAgICAgICBwcm9kdWN0TGlzdDoge30KICAgICAgfTsKICAgICAgc2hvcEluZm8uc2hvcE5hbWUgPSBzaG9wTmFtZTsKICAgICAgc3RhdGUuY2FydExpc3Rbc2hvcElkXSA9IHNob3BJbmZvOwogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICBjaGFuZ2VDYXJ0SXRlbUNoZWNrZWQ6IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtQ2hlY2tlZChzdGF0ZSwgcGF5bG9hZCkgewogICAgICB2YXIgc2hvcElkID0gcGF5bG9hZC5zaG9wSWQsCiAgICAgICAgICBwcm9kdWN0SWQgPSBwYXlsb2FkLnByb2R1Y3RJZDsKICAgICAgdmFyIHByb2R1Y3QgPSBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdLnByb2R1Y3RMaXN0W3Byb2R1Y3RJZF07CiAgICAgIHByb2R1Y3QuY2hlY2sgPSAhcHJvZHVjdC5jaGVjazsKICAgICAgc2V0TG9jYWxDYXJ0TGlzdChzdGF0ZSk7CiAgICB9LAogICAgY2xlYW5DYXJ0UHJvZHVjdHM6IGZ1bmN0aW9uIGNsZWFuQ2FydFByb2R1Y3RzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBzaG9wSWQgPSBwYXlsb2FkLnNob3BJZDsKICAgICAgc3RhdGUuY2FydExpc3Rbc2hvcElkXS5wcm9kdWN0TGlzdCA9IHt9OwogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICBzZXRDYXJ0SXRlbXNDaGVja2VkOiBmdW5jdGlvbiBzZXRDYXJ0SXRlbXNDaGVja2VkKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBzaG9wSWQgPSBwYXlsb2FkLnNob3BJZDsKICAgICAgdmFyIHByb2R1Y3RzID0gc3RhdGUuY2FydExpc3Rbc2hvcElkXS5wcm9kdWN0TGlzdDsKCiAgICAgIGlmIChwcm9kdWN0cykgewogICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9kdWN0cykgewogICAgICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0c1trZXldOwogICAgICAgICAgcHJvZHVjdC5jaGVjayA9IHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICBjbGVhckNhcnREYXRhOiBmdW5jdGlvbiBjbGVhckNhcnREYXRhKHN0YXRlLCBzaG9wSWQpIHsKICAgICAgc3RhdGUuY2FydExpc3Rbc2hvcElkXS5wcm9kdWN0TGlzdCA9IHt9OwogICAgfSwKICAgIGNoYW5nZUFkZHJlc3NMaXN0OiBmdW5jdGlvbiBjaGFuZ2VBZGRyZXNzTGlzdChzdGF0ZSwgYWRkcmVzc0xpc3QpIHsKICAgICAgdmFyIF9zdGF0ZSRhZGRyZXNzTGlzdDsKCiAgICAgIChfc3RhdGUkYWRkcmVzc0xpc3QgPSBzdGF0ZS5hZGRyZXNzTGlzdCkuc3BsaWNlLmFwcGx5KF9zdGF0ZSRhZGRyZXNzTGlzdCwgWzAsIHN0YXRlLmFkZHJlc3NMaXN0Lmxlbmd0aF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhZGRyZXNzTGlzdCkpKTsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["D:/project/study/src/store/index.js"],"names":["Vuex","setLocalCartList","state","cartList","cartListString","JSON","stringify","localStorage","getLocaCartList","parse","e","createStore","addressList","mutations","changeCartItemInfo","payload","shopId","productId","productInfo","shopInfo","shopName","productList","product","count","num","check","changeShopName","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","products","key","clearCartData","changeAddressList","splice","length"],"mappings":"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","sourcesContent":["import Vuex from 'vuex'\r\n\r\nconst setLocalCartList = (state) => {\r\n  const { cartList } = state\r\n  const cartListString = JSON.stringify(cartList)\r\n  localStorage.cartList = cartListString\r\n}\r\n\r\nconst getLocaCartList = () => {\r\n  // { shopId: {shopName:'', productList:{ productId: {} }}}\r\n  try {\r\n    return JSON.parse(localStorage.cartList);\r\n  } catch(e) {\r\n    return {}\r\n  }\r\n}\r\n\r\nexport default Vuex.createStore({\r\n  state: {\r\n    cartList: getLocaCartList(),\r\n    addressList: [],\r\n  },\r\n  mutations: {\r\n    changeCartItemInfo(state, payload) {\r\n      const { shopId, productId, productInfo } = payload\r\n      let shopInfo = state.cartList[shopId] || {\r\n        shopName: '', productList:{}\r\n      }\r\n      let product = shopInfo.productList[productId]\r\n      if(!product) {\r\n        productInfo.count = 0\r\n        product = productInfo\r\n      }\r\n      product.count = product.count + payload.num\r\n      if(payload.num > 0) { product.check = true }\r\n      if(product.count < 0) { product.count = 0 }\r\n      shopInfo.productList[productId] = product\r\n      state.cartList[shopId] = shopInfo\r\n      setLocalCartList(state)\r\n    },\r\n    changeShopName(state, payload) {\r\n      const { shopId, shopName } = payload\r\n      const shopInfo = state.cartList[shopId] || {\r\n        shopName: '', productList:{}\r\n      }\r\n      shopInfo.shopName = shopName\r\n      state.cartList[shopId] = shopInfo\r\n      setLocalCartList(state)\r\n    },\r\n    changeCartItemChecked(state, payload) {\r\n      const { shopId, productId } = payload\r\n      const product = state.cartList[shopId].productList[productId]\r\n      product.check = !product.check\r\n      setLocalCartList(state)\r\n    },\r\n    cleanCartProducts(state, payload) {\r\n      const { shopId } = payload\r\n      state.cartList[shopId].productList = {}\r\n      setLocalCartList(state)\r\n    },\r\n    setCartItemsChecked(state, payload) {\r\n      const { shopId } = payload\r\n      const products = state.cartList[shopId].productList\r\n      if(products) {\r\n        for(let key in products) {\r\n          const product = products[key]\r\n          product.check = true\r\n        }\r\n      }\r\n      setLocalCartList(state)\r\n    },\r\n    clearCartData(state, shopId) {\r\n      state.cartList[shopId].productList = {}\r\n    },\r\n    changeAddressList(state, addressList) {\r\n      state.addressList.splice(0, state.addressList.length, ...addressList)\r\n    }\r\n  }\r\n})\r\n"]}]}